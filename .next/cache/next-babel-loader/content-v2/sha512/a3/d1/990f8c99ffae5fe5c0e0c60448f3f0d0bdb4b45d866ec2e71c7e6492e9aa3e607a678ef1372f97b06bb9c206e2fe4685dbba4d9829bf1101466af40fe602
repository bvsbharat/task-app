{"ast":null,"code":"import _regeneratorRuntime from \"/Users/bbhavnasi/Desktop/ReactJS-Apps/App1/nextjs-blog/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/bbhavnasi/Desktop/ReactJS-Apps/App1/nextjs-blog/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { SUCCESS, FAILURE } from \"../redux/action\";\nimport axios from \"axios\";\nimport { mapData } from \"../utils\";\n\nvar useOpenWeather = function useOpenWeather(options) {\n  _s();\n\n  var dispatch = useDispatch();\n  var endpoint = \"//api.openweathermap.org/data/2.5/onecall\";\n\n  var _useSelector = useSelector(function (state) {\n    return state;\n  }),\n      data = _useSelector.data,\n      errorMessage = _useSelector.errorMessage;\n\n  console.log(data, errorMessage);\n\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var unit = options.unit,\n      lang = options.lang,\n      key = options.key,\n      lon = options.lon,\n      lat = options.lat;\n  var params = {\n    appid: key,\n    lang: lang,\n    units: unit,\n    lat: lat,\n    lon: lon\n  };\n\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var forecastResponse, payload;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.get(endpoint, {\n                params: params\n              });\n\n            case 4:\n              forecastResponse = _context.sent;\n              payload = mapData(forecastResponse.data.daily, forecastResponse.data.current, lang);\n              dispatch({\n                type: SUCCESS,\n                payload: payload\n              });\n              _context.next = 13;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              console.error(_context.t0.message);\n              dispatch({\n                type: FAILURE,\n                payload: {\n                  error: _context.t0.message || _context.t0\n                }\n              });\n\n            case 13:\n              setIsLoading(false);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchData();\n  }, [lon, lat]);\n  return {\n    data: data,\n    isLoading: isLoading,\n    errorMessage: errorMessage,\n    fetchData: fetchData\n  };\n};\n\n_s(useOpenWeather, \"tao/OCsvzpTxtji+NuBDj1ivq0A=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\nexport default useOpenWeather;","map":{"version":3,"sources":["/Users/bbhavnasi/Desktop/ReactJS-Apps/App1/nextjs-blog/src/hooks/useOpenWeather.js"],"names":["useEffect","useState","useSelector","useDispatch","SUCCESS","FAILURE","axios","mapData","useOpenWeather","options","dispatch","endpoint","state","data","errorMessage","console","log","isLoading","setIsLoading","unit","lang","key","lon","lat","params","appid","units","fetchData","get","forecastResponse","payload","daily","current","type","error","message"],"mappings":";;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,iBAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,UAAxB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,OAAD,EAAa;AAAA;;AAClC,MAAMC,QAAQ,GAAGP,WAAW,EAA5B;AACA,MAAMQ,QAAQ,GAAG,2CAAjB;;AAFkC,qBAGHT,WAAW,CAAC,UAACU,KAAD;AAAA,WAAWA,KAAX;AAAA,GAAD,CAHR;AAAA,MAG1BC,IAH0B,gBAG1BA,IAH0B;AAAA,MAGpBC,YAHoB,gBAGpBA,YAHoB;;AAKlCC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkBC,YAAlB;;AALkC,kBAMAb,QAAQ,CAAC,KAAD,CANR;AAAA,MAM3BgB,SAN2B;AAAA,MAMhBC,YANgB;;AAAA,MAO1BC,IAP0B,GAOIV,OAPJ,CAO1BU,IAP0B;AAAA,MAOpBC,IAPoB,GAOIX,OAPJ,CAOpBW,IAPoB;AAAA,MAOdC,GAPc,GAOIZ,OAPJ,CAOdY,GAPc;AAAA,MAOTC,GAPS,GAOIb,OAPJ,CAOTa,GAPS;AAAA,MAOJC,GAPI,GAOId,OAPJ,CAOJc,GAPI;AAQlC,MAAMC,MAAM,GAAG;AACbC,IAAAA,KAAK,EAAEJ,GADM;AAEbD,IAAAA,IAAI,EAAJA,IAFa;AAGbM,IAAAA,KAAK,EAAEP,IAHM;AAIbI,IAAAA,GAAG,EAAHA,GAJa;AAKbD,IAAAA,GAAG,EAAHA;AALa,GAAf;;AAQA,MAAMK,SAAS;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAChBT,cAAAA,YAAY,CAAC,IAAD,CAAZ;AADgB;AAAA;AAAA,qBAGiBZ,KAAK,CAACsB,GAAN,CAAUjB,QAAV,EAAoB;AAAEa,gBAAAA,MAAM,EAANA;AAAF,eAApB,CAHjB;;AAAA;AAGRK,cAAAA,gBAHQ;AAIRC,cAAAA,OAJQ,GAIEvB,OAAO,CACrBsB,gBAAgB,CAAChB,IAAjB,CAAsBkB,KADD,EAErBF,gBAAgB,CAAChB,IAAjB,CAAsBmB,OAFD,EAGrBZ,IAHqB,CAJT;AAUdV,cAAAA,QAAQ,CAAC;AACPuB,gBAAAA,IAAI,EAAE7B,OADC;AAEP0B,gBAAAA,OAAO,EAAPA;AAFO,eAAD,CAAR;AAVc;AAAA;;AAAA;AAAA;AAAA;AAedf,cAAAA,OAAO,CAACmB,KAAR,CAAc,YAAMC,OAApB;AACAzB,cAAAA,QAAQ,CAAC;AAAEuB,gBAAAA,IAAI,EAAE5B,OAAR;AAAiByB,gBAAAA,OAAO,EAAE;AAAEI,kBAAAA,KAAK,EAAE,YAAMC,OAAN;AAAT;AAA1B,eAAD,CAAR;;AAhBc;AAkBhBjB,cAAAA,YAAY,CAAC,KAAD,CAAZ;;AAlBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATS,SAAS;AAAA;AAAA;AAAA,KAAf;;AAoBA3B,EAAAA,SAAS,CAAC,YAAM;AACd2B,IAAAA,SAAS;AACV,GAFQ,EAEN,CAACL,GAAD,EAAMC,GAAN,CAFM,CAAT;AAGA,SAAO;AAAEV,IAAAA,IAAI,EAAJA,IAAF;AAAQI,IAAAA,SAAS,EAATA,SAAR;AAAmBH,IAAAA,YAAY,EAAZA,YAAnB;AAAiCa,IAAAA,SAAS,EAATA;AAAjC,GAAP;AACD,CAxCD;;GAAMnB,c;UACaL,W,EAEcD,W;;;AAuCjC,eAAeM,cAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { SUCCESS, FAILURE } from \"../redux/action\";\nimport axios from \"axios\";\nimport { mapData } from \"../utils\";\n\nconst useOpenWeather = (options) => {\n  const dispatch = useDispatch();\n  const endpoint = \"//api.openweathermap.org/data/2.5/onecall\";\n  const { data, errorMessage } = useSelector((state) => state);\n\n  console.log(data, errorMessage);\n  const [isLoading, setIsLoading] = useState(false);\n  const { unit, lang, key, lon, lat } = options;\n  const params = {\n    appid: key,\n    lang,\n    units: unit,\n    lat,\n    lon,\n  };\n\n  const fetchData = async () => {\n    setIsLoading(true);\n    try {\n      const forecastResponse = await axios.get(endpoint, { params });\n      const payload = mapData(\n        forecastResponse.data.daily,\n        forecastResponse.data.current,\n        lang\n      );\n\n      dispatch({\n        type: SUCCESS,\n        payload,\n      });\n    } catch (error) {\n      console.error(error.message);\n      dispatch({ type: FAILURE, payload: { error: error.message || error } });\n    }\n    setIsLoading(false);\n  };\n  useEffect(() => {\n    fetchData();\n  }, [lon, lat]);\n  return { data, isLoading, errorMessage, fetchData };\n};\n\nexport default useOpenWeather;\n"]},"metadata":{},"sourceType":"module"}