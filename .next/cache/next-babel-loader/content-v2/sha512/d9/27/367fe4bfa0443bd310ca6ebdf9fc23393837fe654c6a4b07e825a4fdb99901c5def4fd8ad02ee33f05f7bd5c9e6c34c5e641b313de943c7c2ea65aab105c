{"ast":null,"code":"export const SET_DATA = \"SET_DATA\";\nexport const FAILURE = \"FAILURE\";\nimport axios from \"axios\";\nimport { mapData } from \"../utils\";\nexport const getData = options => async dispatch => {\n  const {\n    unit,\n    lang,\n    key,\n    query\n  } = options;\n  let params = {\n    appid: key,\n    lang,\n    units: unit,\n    lat: 11,\n    lon: 11\n  };\n  const geoCode = `http://api.openweathermap.org/geo/1.0/direct?q=${query}&&limit=1&appid=${key}`;\n  const forecast = \"//api.openweathermap.org/data/2.5/onecall\";\n  const geocode = await axios.get(geoCode);\n  const [geoData] = geocode.data;\n  params.lat = geoData.lat;\n  params.lon = geoData.lon;\n\n  try {\n    const forecastResponse = await axios.get(forecast, {\n      params\n    });\n    const payload = await mapData(forecastResponse, lang);\n    dispatch({\n      type: SET_DATA,\n      payload: payload\n    });\n  } catch (error) {\n    console.error(error.message);\n    dispatch({\n      type: FAILURE,\n      payload: {\n        error: error.message || error\n      }\n    });\n  }\n};","map":{"version":3,"sources":["/Users/bbhavnasi/Desktop/ReactJS-Apps/App1/nextjs-blog/src/redux/action.js"],"names":["SET_DATA","FAILURE","axios","mapData","getData","options","dispatch","unit","lang","key","query","params","appid","units","lat","lon","geoCode","forecast","geocode","get","geoData","data","forecastResponse","payload","type","error","console","message"],"mappings":"AAAA,OAAO,MAAMA,QAAQ,GAAG,UAAjB;AACP,OAAO,MAAMC,OAAO,GAAG,SAAhB;AACP,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,UAAxB;AAEA,OAAO,MAAMC,OAAO,GAAIC,OAAD,IAAa,MAAOC,QAAP,IAAoB;AACtD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,IAAR;AAAcC,IAAAA,GAAd;AAAmBC,IAAAA;AAAnB,MAA6BL,OAAnC;AACA,MAAIM,MAAM,GAAG;AACXC,IAAAA,KAAK,EAAEH,GADI;AAEXD,IAAAA,IAFW;AAGXK,IAAAA,KAAK,EAAEN,IAHI;AAIXO,IAAAA,GAAG,EAAE,EAJM;AAKXC,IAAAA,GAAG,EAAE;AALM,GAAb;AAQA,QAAMC,OAAO,GAAI,kDAAiDN,KAAM,mBAAkBD,GAAI,EAA9F;AACA,QAAMQ,QAAQ,GAAG,2CAAjB;AAEA,QAAMC,OAAO,GAAG,MAAMhB,KAAK,CAACiB,GAAN,CAAUH,OAAV,CAAtB;AAEA,QAAM,CAACI,OAAD,IAAYF,OAAO,CAACG,IAA1B;AAEAV,EAAAA,MAAM,CAACG,GAAP,GAAaM,OAAO,CAACN,GAArB;AACAH,EAAAA,MAAM,CAACI,GAAP,GAAaK,OAAO,CAACL,GAArB;;AAEA,MAAI;AACF,UAAMO,gBAAgB,GAAG,MAAMpB,KAAK,CAACiB,GAAN,CAAUF,QAAV,EAAoB;AAAEN,MAAAA;AAAF,KAApB,CAA/B;AAEA,UAAMY,OAAO,GAAG,MAAMpB,OAAO,CAACmB,gBAAD,EAAmBd,IAAnB,CAA7B;AAEAF,IAAAA,QAAQ,CAAC;AACPkB,MAAAA,IAAI,EAAExB,QADC;AAEPuB,MAAAA,OAAO,EAAEA;AAFF,KAAD,CAAR;AAID,GATD,CASE,OAAOE,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAK,CAACE,OAApB;AACArB,IAAAA,QAAQ,CAAC;AAAEkB,MAAAA,IAAI,EAAEvB,OAAR;AAAiBsB,MAAAA,OAAO,EAAE;AAAEE,QAAAA,KAAK,EAAEA,KAAK,CAACE,OAAN,IAAiBF;AAA1B;AAA1B,KAAD,CAAR;AACD;AACF,CAjCM","sourcesContent":["export const SET_DATA = \"SET_DATA\";\nexport const FAILURE = \"FAILURE\";\nimport axios from \"axios\";\nimport { mapData } from \"../utils\";\n\nexport const getData = (options) => async (dispatch) => {\n  const { unit, lang, key, query } = options;\n  let params = {\n    appid: key,\n    lang,\n    units: unit,\n    lat: 11,\n    lon: 11,\n  };\n\n  const geoCode = `http://api.openweathermap.org/geo/1.0/direct?q=${query}&&limit=1&appid=${key}`;\n  const forecast = \"//api.openweathermap.org/data/2.5/onecall\";\n\n  const geocode = await axios.get(geoCode);\n\n  const [geoData] = geocode.data;\n\n  params.lat = geoData.lat;\n  params.lon = geoData.lon;\n\n  try {\n    const forecastResponse = await axios.get(forecast, { params });\n\n    const payload = await mapData(forecastResponse, lang);\n\n    dispatch({\n      type: SET_DATA,\n      payload: payload,\n    });\n  } catch (error) {\n    console.error(error.message);\n    dispatch({ type: FAILURE, payload: { error: error.message || error } });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}